{"version":3,"sources":["../src/index.js"],"names":["app","server","http","createServer","use","exposedHeaders","config","corsHeaders","bodyParser","json","limit","bodyLimit","then","db","listen","process","env","PORT","port","console","log","address"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AAAA,IACEC,SAASC,eAAKC,YAAL,CAAkBH,GAAlB,CADX;;AAGA;AACAA,IAAII,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEA;AACAJ,IAAII,GAAJ,CACE,oBAAK;AACHC,kBAAgBC,iBAAOC;AADpB,CAAL,CADF;;AAMAP,IAAII,GAAJ,CACEI,qBAAWC,IAAX,CAAgB;AACdC,SAAOJ,iBAAOK;AADA,CAAhB,CADF;;AAMA;AACA,kBAAaL,gBAAb,EAAqBM,IAArB,CAA0B,cAAM;AAC9B;AACAZ,MAAII,GAAJ,CAAQ,MAAR,EAAgB,2BAAI,EAAEE,wBAAF,EAAUO,MAAV,EAAJ,CAAhB;;AAEAZ,SAAOa,MAAP,CAAcC,QAAQC,GAAR,CAAYC,IAAZ,IAAoBX,iBAAOY,IAAzC,EAA+C,YAAM;AACnDC,YAAQC,GAAR,sBAA+BnB,OAAOoB,OAAP,GAAiBH,IAAhD;AACD,GAFD;AAGD,CAPD;;kBASelB,G","file":"index.js","sourcesContent":["import http from \"http\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport morgan from \"morgan\";\nimport bodyParser from \"body-parser\";\nimport initializeDb from \"./db\";\nimport api from \"./controllers\";\nimport config from \"./config.json\";\n\nconst app = express(),\n  server = http.createServer(app);\n\n// logger\napp.use(morgan(\"dev\"));\n\n// 3rd party middleware\napp.use(\n  cors({\n    exposedHeaders: config.corsHeaders\n  })\n);\n\napp.use(\n  bodyParser.json({\n    limit: config.bodyLimit\n  })\n);\n\n// connect to db\ninitializeDb(config).then(db => {\n  // api router\n  app.use(\"/api\", api({ config, db }));\n\n  server.listen(process.env.PORT || config.port, () => {\n    console.log(`Started on port ${server.address().port}`);\n  });\n});\n\nexport default app;\n"]}